{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/david-randoll/AutomationEngine/automation-engine-schema.json",
  "title": "Automation Engine Definition",
  "description": "Schema for defining automations in AutomationEngine. Automations can be defined in YAML or JSON format.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "alias": {
      "type": "string",
      "description": "A unique identifier/name for this automation"
    },
    "description": {
      "type": "string",
      "description": "A description of what this automation does"
    },
    "variables": {
      "type": "array",
      "description": "Variables to be defined and used within the automation",
      "items": {
        "$ref": "#/$defs/VariableDefinition"
      }
    },
    "triggers": {
      "type": "array",
      "description": "Triggers that determine when this automation should execute",
      "items": {
        "$ref": "#/$defs/TriggerDefinition"
      }
    },
    "conditions": {
      "type": "array",
      "description": "Additional conditions that must be met for the automation to execute",
      "items": {
        "$ref": "#/$defs/ConditionDefinition"
      }
    },
    "actions": {
      "type": "array",
      "description": "Actions to execute when the automation is triggered",
      "items": {
        "$ref": "#/$defs/ActionDefinition"
      }
    },
    "result": {
      "description": "The result/output of the automation execution. Can contain any properties using template expressions.",
      "type": "object",
      "additionalProperties": true
    }
  },
  "$defs": {
    "BaseBlock": {
      "type": "object",
      "properties": {
        "alias": {
          "type": "string",
          "description": "Alias for this block"
        },
        "description": {
          "type": "string",
          "description": "Description of this block"
        }
      }
    },
    "VariableDefinition": {
      "type": "object",
      "description": "A variable definition block. Can define simple key-value pairs or use variable types.",
      "properties": {
        "alias": {
          "type": "string",
          "description": "Alias for this variable block"
        },
        "description": {
          "type": "string",
          "description": "Description of this variable"
        },
        "variable": {
          "type": "string",
          "description": "The variable type to use",
          "enum": [
            "basicVariable",
            "ifThenElseVariable",
            "userDefinedVariable"
          ]
        }
      },
      "additionalProperties": true
    },
    "TriggerDefinition": {
      "type": "object",
      "description": "A trigger definition that determines when an automation executes",
      "required": [
        "trigger"
      ],
      "allOf": [
        {
          "$ref": "#/$defs/BaseBlock"
        },
        {
          "properties": {
            "trigger": {
              "type": "string",
              "description": "The trigger type",
              "enum": [
                "alwaysFalse",
                "alwaysTrue",
                "onEventType",
                "template",
                "time",
                "userDefined",
                "onHttpPathExists",
                "onHttpRequest",
                "onHttpClientErrorResponse",
                "onHttpErrorResponse",
                "onHttpResponse",
                "onHttpServerErrorResponse",
                "onHttpSuccessResponse",
                "onSlowHttpRequest",
                "onJdbcQuery"
              ]
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "alwaysTrue"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "alwaysFalse"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "onEventType"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "eventType": {
                "type": "string",
                "description": "The event type class name to match"
              },
              "eventName": {
                "type": "string",
                "description": "The event name to match"
              },
              "regex": {
                "type": "string",
                "description": "Regex pattern for matching event name"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "template"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "expression": {
                "type": "string",
                "description": "Template expression that evaluates to true/false"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "time"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "at": {
                "type": "string",
                "description": "Time to trigger, e.g., '09:00' or '23:50'"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "userDefined"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": true,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "name": {
                "type": "string",
                "description": "Name of the user-defined trigger"
              },
              "parameters": {
                "type": "object",
                "description": "Parameters for the user-defined trigger"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "onHttpRequest"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "methods": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/HttpMethodEnum"
                },
                "description": "HTTP methods to match"
              },
              "paths": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "URL path patterns to match"
              },
              "fullPaths": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Full URL paths to match"
              },
              "headers": {
                "type": "object",
                "description": "Headers to match"
              },
              "queryParams": {
                "type": "object",
                "description": "Query parameters to match"
              },
              "pathParams": {
                "type": "object",
                "description": "Path parameters to match"
              },
              "requestBody": {
                "type": "object",
                "description": "Request body to match"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "enum": [
                  "onHttpResponse",
                  "onHttpSuccessResponse",
                  "onHttpErrorResponse",
                  "onHttpClientErrorResponse",
                  "onHttpServerErrorResponse"
                ]
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "methods": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/HttpMethodEnum"
                }
              },
              "paths": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "fullPaths": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "headers": {
                "type": "object"
              },
              "queryParams": {
                "type": "object"
              },
              "pathParams": {
                "type": "object"
              },
              "requestBody": {
                "type": "object"
              },
              "responseBody": {
                "type": "object"
              },
              "responseStatuses": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/HttpStatus"
                }
              },
              "errorDetail": {
                "type": "object"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "onHttpPathExists"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "paths": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "methods": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/HttpMethodEnum"
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "onSlowHttpRequest"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "duration": {
                "type": "string",
                "description": "Duration threshold (ISO 8601, e.g., 'PT5S' for 5 seconds)"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "trigger": {
                "const": "onJdbcQuery"
              }
            },
            "required": [
              "trigger"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "trigger": true,
              "alias": true,
              "description": true,
              "query": {
                "type": "string",
                "description": "SQL query to execute"
              },
              "params": {
                "type": "object",
                "description": "Query parameters"
              },
              "expression": {
                "type": "string",
                "description": "Template expression to evaluate query result"
              }
            }
          }
        }
      ]
    },
    "ConditionDefinition": {
      "type": "object",
      "description": "A condition that must be met for the automation to proceed",
      "required": [
        "condition"
      ],
      "allOf": [
        {
          "$ref": "#/$defs/BaseBlock"
        },
        {
          "properties": {
            "condition": {
              "type": "string",
              "description": "The condition type",
              "enum": [
                "alwaysFalse",
                "alwaysTrue",
                "and",
                "or",
                "not",
                "onEventType",
                "template",
                "time",
                "userDefined",
                "httpErrorDetail",
                "httpFullPath",
                "httpHeader",
                "httpLatency",
                "httpMethod",
                "httpPath",
                "httpPathParam",
                "httpQueryParam",
                "httpRequestBody",
                "httpResponseBody",
                "httpResponseStatus",
                "httpPathExists",
                "onJdbcQuery"
              ]
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "enum": [
                  "alwaysTrue",
                  "alwaysFalse"
                ]
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "enum": [
                  "and",
                  "or",
                  "not"
                ]
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "conditions": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ConditionDefinition"
                },
                "description": "Nested conditions"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "onEventType"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "eventType": {
                "type": "string"
              },
              "eventName": {
                "type": "string"
              },
              "regex": {
                "type": "string"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "template"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "expression": {
                "type": "string",
                "description": "Template expression that evaluates to true/false"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "time"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "before": {
                "type": "string",
                "description": "Time must be before this (e.g., '17:00')"
              },
              "after": {
                "type": "string",
                "description": "Time must be after this (e.g., '09:00')"
              },
              "inclusive": {
                "type": "boolean",
                "description": "Whether time bounds are inclusive"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "userDefined"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": true,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "name": {
                "type": "string"
              },
              "parameters": {
                "type": "object"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "enum": [
                  "httpFullPath",
                  "httpMethod",
                  "httpPath",
                  "httpResponseStatus"
                ]
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "equals": {
                "type": "string"
              },
              "notEquals": {
                "type": "string"
              },
              "in": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "notIn": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "regex": {
                "type": "string"
              },
              "like": {
                "type": "string"
              },
              "exists": {
                "type": "boolean"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "enum": [
                  "httpHeader",
                  "httpPathParam",
                  "httpQueryParam",
                  "httpErrorDetail"
                ]
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": true,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "headers": {
                "type": "object"
              },
              "pathParams": {
                "type": "object"
              },
              "queryParams": {
                "type": "object"
              },
              "errorDetail": {
                "type": "object"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "enum": [
                  "httpRequestBody",
                  "httpResponseBody"
                ]
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "requestBody": {
                "type": "object"
              },
              "responseBody": {
                "type": "object"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "httpLatency"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "duration": {
                "type": "string"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "httpPathExists"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "paths": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "methods": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/HttpMethodEnum"
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "condition": {
                "const": "onJdbcQuery"
              }
            },
            "required": [
              "condition"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "condition": true,
              "alias": true,
              "description": true,
              "query": {
                "type": "string"
              },
              "params": {
                "type": "object"
              },
              "expression": {
                "type": "string"
              }
            }
          }
        }
      ]
    },
    "ActionDefinition": {
      "type": "object",
      "description": "An action to execute when the automation runs",
      "required": [
        "action"
      ],
      "allOf": [
        {
          "$ref": "#/$defs/BaseBlock"
        },
        {
          "properties": {
            "action": {
              "type": "string",
              "description": "The action type",
              "enum": [
                "changeAssignee",
                "changeStatus",
                "createTodo",
                "sendEmail",
                "delay",
                "ifThenElse",
                "logger",
                "parallel",
                "repeat",
                "sequence",
                "stop",
                "variable",
                "waitForTrigger",
                "userDefined",
                "publishRabbitMqEvent",
                "publishSpringEvent",
                "jdbcExecute",
                "jdbcQuery"
              ]
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "logger"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "level": {
                "type": "string",
                "enum": [
                  "ERROR",
                  "WARN",
                  "INFO",
                  "DEBUG",
                  "TRACE"
                ],
                "description": "Log level"
              },
              "message": {
                "type": "string",
                "description": "Message to log (supports template expressions)"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "sendEmail"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "to": {
                "type": "string",
                "description": "Email recipient"
              },
              "subject": {
                "type": "string",
                "description": "Email subject"
              },
              "body": {
                "type": "string",
                "description": "Email body"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "delay"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "duration": {
                "type": "string",
                "description": "Duration to wait (ISO 8601, e.g., 'PT5S' for 5 seconds, 'PT1M' for 1 minute)"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "stop"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "condition": {
                "$ref": "#/$defs/ConditionDefinition"
              },
              "stopActionSequence": {
                "type": "boolean",
                "description": "Stop the current action sequence"
              },
              "stopAutomation": {
                "type": "boolean",
                "description": "Stop the entire automation"
              },
              "stopMessage": {
                "type": "string",
                "description": "Message to log when stopping"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "variable"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": true,
            "properties": {
              "action": true,
              "alias": true,
              "description": true
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "ifThenElse"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "if": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ConditionDefinition"
                },
                "description": "Conditions to evaluate"
              },
              "then": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ActionDefinition"
                },
                "description": "Actions if conditions are true"
              },
              "ifs": {
                "type": "array",
                "description": "Additional if-then blocks (else-if)",
                "items": {
                  "type": "object",
                  "properties": {
                    "if": {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/ConditionDefinition"
                      }
                    },
                    "then": {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/ActionDefinition"
                      }
                    }
                  }
                }
              },
              "else": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ActionDefinition"
                },
                "description": "Actions if no conditions match"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "enum": [
                  "sequence",
                  "parallel"
                ]
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "actions": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ActionDefinition"
                },
                "description": "Actions to execute"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "repeat"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "count": {
                "type": "integer",
                "description": "Number of times to repeat"
              },
              "while": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ConditionDefinition"
                },
                "description": "Continue while conditions are true"
              },
              "until": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ConditionDefinition"
                },
                "description": "Continue until conditions are true"
              },
              "for_each": {
                "type": "array",
                "description": "Iterate over this array"
              },
              "actions": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ActionDefinition"
                },
                "description": "Actions to repeat"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "waitForTrigger"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "triggers": {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/TriggerDefinition"
                },
                "description": "Triggers to wait for"
              },
              "timeout": {
                "type": "string",
                "description": "Timeout duration (ISO 8601)"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "createTodo"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "storeToVariable": {
                "type": "string",
                "description": "Variable name to store the created todo"
              },
              "title": {
                "type": "string",
                "description": "Todo title"
              },
              "todoAssignee": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer"
                  },
                  "username": {
                    "type": "string"
                  },
                  "fullName": {
                    "type": "string"
                  }
                }
              },
              "todoStatus": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer"
                  },
                  "code": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "changeStatus"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "storeToVariable": {
                "type": "string"
              },
              "todoId": {
                "oneOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "description": "Todo ID"
              },
              "newStatusCode": {
                "type": "string",
                "description": "New status code"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "changeAssignee"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "storeToVariable": {
                "type": "string"
              },
              "todoId": {
                "oneOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ]
              },
              "newAssigneeUsername": {
                "type": "string"
              },
              "newAssigneeFullName": {
                "type": "string"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "userDefined"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": true,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "name": {
                "type": "string",
                "description": "Name of the user-defined action"
              },
              "parameters": {
                "type": "object",
                "description": "Parameters for the action"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "publishRabbitMqEvent"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "exchange": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "DIRECT",
                      "TOPIC",
                      "FANOUT"
                    ]
                  },
                  "durable": {
                    "type": "boolean"
                  },
                  "autoDelete": {
                    "type": "boolean"
                  }
                }
              },
              "queue": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "durable": {
                    "type": "boolean"
                  },
                  "exclusive": {
                    "type": "boolean"
                  },
                  "autoDelete": {
                    "type": "boolean"
                  }
                }
              },
              "routingKey": {
                "type": "string"
              },
              "message": {
                "type": "object"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "publishSpringEvent"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": true,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "className": {
                "type": "string",
                "description": "Event class name"
              },
              "publishToAutomationEngine": {
                "type": "boolean",
                "description": "Also publish to automation engine"
              },
              "data": {
                "type": "object",
                "description": "Event data payload"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "jdbcExecute"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "query": {
                "type": "string",
                "description": "SQL query to execute"
              },
              "params": {
                "type": "object",
                "description": "Query parameters"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "action": {
                "const": "jdbcQuery"
              }
            },
            "required": [
              "action"
            ]
          },
          "then": {
            "additionalProperties": false,
            "properties": {
              "action": true,
              "alias": true,
              "description": true,
              "query": {
                "type": "string",
                "description": "SQL query"
              },
              "params": {
                "type": "object",
                "description": "Query parameters"
              },
              "mode": {
                "type": "string",
                "description": "Result mode (list, single, etc.)"
              },
              "variable": {
                "type": "string",
                "description": "Variable to store result"
              }
            }
          }
        }
      ]
    },
    "HttpMethodEnum": {
      "type": "string",
      "enum": [
        "GET",
        "POST",
        "PUT",
        "DELETE",
        "PATCH",
        "HEAD",
        "OPTIONS",
        "TRACE",
        "CONNECT"
      ],
      "description": "HTTP method"
    },
    "HttpStatus": {
      "type": "string",
      "enum": [
        "OK",
        "CREATED",
        "ACCEPTED",
        "NO_CONTENT",
        "BAD_REQUEST",
        "UNAUTHORIZED",
        "FORBIDDEN",
        "NOT_FOUND",
        "METHOD_NOT_ALLOWED",
        "CONFLICT",
        "INTERNAL_SERVER_ERROR",
        "NOT_IMPLEMENTED",
        "BAD_GATEWAY",
        "SERVICE_UNAVAILABLE"
      ],
      "description": "HTTP status (common values)"
    }
  }
}